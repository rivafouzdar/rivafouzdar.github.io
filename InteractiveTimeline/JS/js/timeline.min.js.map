{"version":3,"sources":["timeline.js"],"names":["timeline","collection","options","timelines","resizeTimer","defaultSettings","mode","forceVerticalMode","testValues","value","settingName","console","itemWrap","el","wrapper","classes","classList","add","parentNode","isElementInViewport","rect","getBoundingClientRect","bottom","window","innerHeight","document","documentElement","clientHeight","right","innerWidth","clientWidth","timelinePosition","tl","position","currentIndex","offsetLeft","scroller","str","style","webkitTransform","msTransform","setUpHorinzontalTimeline","oddIndexTallest","navArrows","arrowPrev","arrowNext","timelineEl","itemWidth","setWidths","wrap","offsetWidth","visibleItems","items","forEach","scrollerWidth","length","width","evenIndexTallest","i","item","height","offsetHeight","setHeightandWidths","addNavigation","prevArrow","createElement","nextArrow","topPosition","className","textContent","top","appendChild","addHorizontalDivider","querySelector","remove","horizontalDivider","querySelectorAll","maxIndex","arrow","e","preventDefault","contains","disabled","setUpTimelines","opacity","wrapElements","resetTimelines","removeAttribute","lastVisibleIndex","setUpVerticalTimeline","divider","verticalStartPosition","addEventListener","setTimeout","dataset","id","data","warningLabel","Error","errorPart","timelineName","slice","call","children","warn","message","push","clearTimeout","jQuery","fn","opts"],"mappings":"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","file":"timeline.min.js","sourcesContent":["function timeline(collection, options) {\r\n  const timelines = [];\r\n  let resizeTimer;\r\n  let currentIndex = 0;\r\n  const warningLabel = 'Timeline:';\r\n\r\n  // Set default settings\r\n  const defaultSettings = {\r\n    mode: 'vertical',\r\n    forceVerticalMode: 600,\r\n    verticalStartPosition: 'left',\r\n    visibleItems: 3,\r\n  };\r\n\r\n  // Helper function to test whether values are an integer\r\n  function testValues(value, settingName) {\r\n    if (typeof value !== 'number' && value % 1 !== 0) {\r\n      console.warn(`${warningLabel} Supplied number '${value}' for ${settingName} is not an integer.`);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Helper function to wrap an element in another HTML element\r\n  function itemWrap(el, wrapper, classes) {\r\n    wrapper.classList.add(classes);\r\n    el.parentNode.insertBefore(wrapper, el);\r\n    wrapper.appendChild(el);\r\n  }\r\n\r\n  // Helper function to Wrap each element with other HTML elements\r\n  function wrapElements(items) {\r\n    items.forEach(item => {\r\n      itemWrap(item.querySelector('.timeline__content'), document.createElement('div'), 'timeline__content__wrap');\r\n      itemWrap(item.querySelector('.timeline__content__wrap'), document.createElement('div'), 'timeline__item__inner');\r\n    });\r\n  }\r\n\r\n  // Helper function to check if an element is in viewport\r\n  function isElementInViewport(el) {\r\n    const rect = el.getBoundingClientRect();\r\n    return (\r\n      rect.top >= 0 &&\r\n      rect.left >= 0 &&\r\n      rect.bottom <= (window.innerHeight * 1.1 || document.documentElement.clientHeight * 1.1) &&\r\n      rect.right <= (window.innerWidth || document.documentElement.clientWidth)\r\n    );\r\n  }\r\n\r\n  // Create timelines\r\n  function createTimelines(timelineEl) {\r\n    const timelineName = timelineEl.id ? `#${timelineEl.id}` : `.${timelineEl.className}`;\r\n    const errorPart = 'could not be found as a direct descendant of';\r\n    const data = timelineEl.dataset;\r\n    let wrap;\r\n    let scroller;\r\n    let items;\r\n    let { mode, verticalStartPosition, forceVerticalMode, visibleItems } = defaultSettings;\r\n    if (data.mode) {\r\n      ({ mode } = data);\r\n    } else if (options && options.mode) {\r\n      ({ mode } = options);\r\n    }\r\n    if (data.verticalStartPosition) {\r\n      ({ verticalStartPosition } = data);\r\n    } else if (options && options.verticalStartPosition) {\r\n      ({ verticalStartPosition } = options);\r\n    }\r\n    if (data.forceVerticalMode) {\r\n      ({ forceVerticalMode } = data);\r\n    } else if (options && options.forceVerticalMode) {\r\n      ({ forceVerticalMode } = options);\r\n    }\r\n    if (data.visibleItems) {\r\n      ({ visibleItems } = data);\r\n    } else if (options && options.visibleItems) {\r\n      ({ visibleItems } = options);\r\n    }\r\n\r\n    if (mode !== 'horizontal' && mode !== 'vertical') {\r\n      console.warn(`${warningLabel}The mode '${mode}' was not recognised`);\r\n      ({ mode } = defaultSettings);\r\n    }\r\n\r\n    if (verticalStartPosition !== 'left' && verticalStartPosition !== 'right') {\r\n      console.warn(`${warningLabel}The start position '${verticalStartPosition}' was not recognised`);\r\n      ({ verticalStartPosition } = defaultSettings);\r\n    }\r\n\r\n    if (!forceVerticalMode || !testValues(forceVerticalMode, \"'forceVerticalMode'\")) {\r\n      ({ forceVerticalMode } = defaultSettings);\r\n    }\r\n\r\n    if (!visibleItems || !testValues(visibleItems, \"'visibleItems'\")) {\r\n      ({ visibleItems } = defaultSettings);\r\n    }\r\n\r\n    try {\r\n      wrap = timelineEl.querySelector('.timeline__wrap');\r\n      if (!wrap) {\r\n        throw new Error(`${warningLabel}.timeline__wrap ${errorPart} ${timelineName}`);\r\n      } else {\r\n        scroller = wrap.querySelector('.timeline__items');\r\n        if (!scroller) {\r\n          throw new Error(`${warningLabel}.timeline__items ${errorPart} .timeline__wrap`);\r\n        } else {\r\n          items = [].slice.call(scroller.children, 0);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e.message);\r\n      return false;\r\n    }\r\n\r\n    timelines.push({\r\n      timelineEl,\r\n      wrap,\r\n      scroller,\r\n      mode,\r\n      verticalStartPosition,\r\n      items,\r\n      visibleItems,\r\n      forceVerticalMode,\r\n    });\r\n  }\r\n\r\n  if (collection.length) {\r\n    [].forEach.call(collection, createTimelines);\r\n  }\r\n\r\n  // Set height and widths of timeline elements and viewport\r\n  function setHeightandWidths(tl) {\r\n    // Set widths of items and viewport\r\n    function setWidths() {\r\n      tl.itemWidth = tl.wrap.offsetWidth / tl.visibleItems;\r\n      tl.items.forEach(item => {\r\n        item.style.width = `${tl.itemWidth}px`;\r\n      });\r\n      tl.scrollerWidth = tl.itemWidth * tl.items.length;\r\n      tl.scroller.style.width = `${tl.scrollerWidth}px`;\r\n    }\r\n\r\n    // Set height of items and viewport\r\n    function setHeights() {\r\n      let oddIndexTallest = 0;\r\n      let evenIndexTallest = 0;\r\n      tl.items.forEach((item, i) => {\r\n        item.style.height = 'auto';\r\n        const height = item.offsetHeight;\r\n        if (i % 2 === 0) {\r\n          evenIndexTallest = height > evenIndexTallest ? height : evenIndexTallest;\r\n        } else {\r\n          oddIndexTallest = height > oddIndexTallest ? height : oddIndexTallest;\r\n        }\r\n      });\r\n      tl.items.forEach((item, i) => {\r\n        if (i % 2 === 0) {\r\n          item.style.height = `${evenIndexTallest}px`;\r\n        } else {\r\n          item.style.height = `${oddIndexTallest}px`;\r\n          item.style.transform = `translateY(${evenIndexTallest}px)`;\r\n        }\r\n      });\r\n      tl.scroller.style.height = `${evenIndexTallest + oddIndexTallest}px`;\r\n    }\r\n\r\n    if (window.innerWidth > tl.forceVerticalMode) {\r\n      setWidths();\r\n      setHeights();\r\n    }\r\n  }\r\n\r\n  // Create and add arrow controls to horizontal timeline\r\n  function addNavigation(tl) {\r\n    if (tl.items.length > tl.visibleItems) {\r\n      const prevArrow = document.createElement('button');\r\n      const nextArrow = document.createElement('button');\r\n      const topPosition = tl.items[0].offsetHeight;\r\n      prevArrow.className = 'timeline-nav-button timeline-nav-button--prev';\r\n      nextArrow.className = 'timeline-nav-button timeline-nav-button--next';\r\n      prevArrow.textContent = 'Previous';\r\n      nextArrow.textContent = 'Next';\r\n      prevArrow.style.top = `${topPosition}px`;\r\n      nextArrow.style.top = `${topPosition}px`;\r\n      if (currentIndex === 0) {\r\n        prevArrow.disabled = true;\r\n      } else if (currentIndex + 1 === tl.items.length) {\r\n        nextArrow.disabled = true;\r\n      }\r\n      tl.timelineEl.appendChild(prevArrow);\r\n      tl.timelineEl.appendChild(nextArrow);\r\n    }\r\n  }\r\n\r\n  // Add arrow controls to horizontal timeline\r\n  function addHorizontalDivider(tl) {\r\n    if (tl.timelineEl.querySelector('.timeline-divider')) {\r\n      tl.timelineEl.querySelector('.timeline-divider').remove();\r\n    }\r\n    const topPosition = tl.items[0].offsetHeight;\r\n    const horizontalDivider = document.createElement('span');\r\n    horizontalDivider.className = 'timeline-divider';\r\n    horizontalDivider.style.top = `${topPosition}px`;\r\n    tl.timelineEl.appendChild(horizontalDivider);\r\n  }\r\n\r\n  // Calculate the new position of the horizontal timeline\r\n  function timelinePosition(tl) {\r\n    const position = tl.items[currentIndex].offsetLeft;\r\n    const str = `translate3d(-${position}px, 0, 0)`;\r\n    tl.scroller.style.webkitTransform = str;\r\n    tl.scroller.style.msTransform = str;\r\n    tl.scroller.style.transform = str;\r\n  }\r\n\r\n  // Make the horizontal timeline slide\r\n  function slideTimeline(tl) {\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    const arrowPrev = tl.timelineEl.querySelector('.timeline-nav-button--prev');\r\n    const arrowNext = tl.timelineEl.querySelector('.timeline-nav-button--next');\r\n    const maxIndex = tl.items.length - tl.visibleItems;\r\n    [].forEach.call(navArrows, arrow => {\r\n      arrow.addEventListener('click', function(e) {\r\n        e.preventDefault();\r\n        currentIndex = this.classList.contains('timeline-nav-button--next') ? (currentIndex += 1) : (currentIndex -= 1);\r\n        if (currentIndex === 0) {\r\n          arrowPrev.disabled = true;\r\n          arrowNext.disabled = false;\r\n        } else if (currentIndex === maxIndex) {\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = true;\r\n        } else {\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = false;\r\n        }\r\n        timelinePosition(tl);\r\n      });\r\n    });\r\n  }\r\n\r\n  // Set up horizontal timeline\r\n  function setUpHorinzontalTimeline(tl) {\r\n    tl.timelineEl.classList.add('timeline--horizontal');\r\n    setHeightandWidths(tl);\r\n    timelinePosition(tl);\r\n    addNavigation(tl);\r\n    addHorizontalDivider(tl);\r\n    slideTimeline(tl);\r\n  }\r\n\r\n  // Set up vertical timeline\r\n  function setUpVerticalTimeline(tl) {\r\n    let lastVisibleIndex = 0;\r\n    tl.items.forEach((item, i) => {\r\n      item.classList.remove('animated', 'fadeIn');\r\n      if (!isElementInViewport(item) && i > 0) {\r\n        item.classList.add('animated');\r\n      } else {\r\n        lastVisibleIndex = i;\r\n      }\r\n      const divider = tl.verticalStartPosition === 'left' ? 1 : 0;\r\n      if (i % 2 === divider && window.innerWidth > defaultSettings.forceVerticalMode) {\r\n        item.classList.add('timeline__item--right');\r\n      } else {\r\n        item.classList.add('timeline__item--left');\r\n      }\r\n    });\r\n    for (let i = 0; i < lastVisibleIndex; i += 1) {\r\n      tl.items[i].classList.remove('animated', 'fadeIn');\r\n    }\r\n    // Bring elements into view as the page is scrolled\r\n    window.addEventListener('scroll', () => {\r\n      tl.items.forEach(item => {\r\n        if (isElementInViewport(item)) {\r\n          item.classList.add('fadeIn');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Reset timelines\r\n  function resetTimelines(tl) {\r\n    currentIndex = 0;\r\n    tl.timelineEl.classList.remove('timeline--horizontal', 'timeline--mobile');\r\n    tl.scroller.removeAttribute('style');\r\n    tl.items.forEach(item => {\r\n      item.removeAttribute('style');\r\n      item.classList.remove('animated', 'fadeIn', 'timeline__item--left', 'timeline__item--right');\r\n    });\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    [].forEach.call(navArrows, arrow => {\r\n      arrow.parentNode.removeChild(arrow);\r\n    });\r\n  }\r\n\r\n  // Set up the timelines\r\n  function setUpTimelines() {\r\n    timelines.forEach(tl => {\r\n      tl.timelineEl.style.opacity = 0;\r\n      if (!tl.timelineEl.classList.contains('timeline--loaded')) {\r\n        wrapElements(tl.items);\r\n      }\r\n      resetTimelines(tl);\r\n      if (window.innerWidth <= tl.forceVerticalMode) {\r\n        tl.timelineEl.classList.add('timeline--mobile');\r\n      }\r\n      if (tl.mode === 'horizontal' && window.innerWidth > tl.forceVerticalMode) {\r\n        setUpHorinzontalTimeline(tl);\r\n      } else {\r\n        setUpVerticalTimeline(tl);\r\n      }\r\n      tl.timelineEl.classList.add('timeline--loaded');\r\n      setTimeout(() => {\r\n        tl.timelineEl.style.opacity = 1;\r\n      }, 500);\r\n    });\r\n  }\r\n\r\n  // Initialise the timelines on the page\r\n  setUpTimelines();\r\n\r\n  window.addEventListener('resize', () => {\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(setUpTimelines, 250);\r\n  });\r\n}\r\n\r\nif (window.jQuery) {\r\n  ($ => {\r\n    $.fn.timeline = function(opts) {\r\n      timeline(this, opts);\r\n      return this;\r\n    };\r\n  })(window.jQuery);\r\n}\r\n"]}